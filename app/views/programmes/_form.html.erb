<%= form_for(programme) do |f| %>
<%= render 'shared/error_messages', :object => f.object %>

  <div class="field">
    <%= f.label :titre %><br/>
    <%= f.text_field :titre, size:50 %>
  </div>

  <div class="field">
    <%= f.label :date_debut, "Date de début" %><br/>
    <%= f.datetime_select :date_debut %>
  </div>

  <div class="field">
    <%= f.label :date_fin, "Date de fin" %><br/>
    <%= f.datetime_select :date_fin %>
  </div>

  <div class="field">
    <%= f.label :responsable_id %><br/>
    <%= f.select :responsable_id, User.all.collect { |p| [p, "#{p.id}"]} %>
  </div>


    <% if programme.id.nil? %>
        <div class="field">
            <%= f.label "Documents types" %><br/>
            <%= f.file_field :documents, multiple: true %>
        </div>
    <% end %>


  <div class="actions">
    <%= f.submit "Enregistrer", class: "ui button blue mini" %>
  </div>

<hr/>


    <% if programme.documents.count != 0 %>
    <br/>
    <div class="field">
        <%= f.label "Documents types associés" %><br/>
        <% programme.documents.each_with_index do |p,i| %>
        <%= link_to "#{p.path.split('/').last}", p.url, target: "_blank" %> <%= link_to "(supprimer)", programme_document_path(@programme, i), :method => :delete, data: {confirm: "Etes-vous certain de supprimer ?" } %><br/>
        <% end %>
    </div>
    <% end %>

<% end %>


<% if !programme.id.nil? %>
<%= form_for programme, url: programme_documents_path(programme), method: :post do |f| %>
    <div class="field">
        <%= f.label "Ajouter des documents types" %><br/>
        <%= f.file_field :documents, multiple: true %>
    </div>
    <div class="actions">
        <%= f.submit "Ajouter", class: "ui mini button blue" %>
    </div>
<% end %>
<% end %>


